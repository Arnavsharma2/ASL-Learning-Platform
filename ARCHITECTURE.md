# Performance Settings Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User's Browser                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  Settings    â”‚  â† User chooses performance mode             â”‚
â”‚  â”‚   Page       â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚         â”‚                                                       â”‚
â”‚         â”œâ”€ Stores in localStorage                              â”‚
â”‚         â”‚                                                       â”‚
â”‚         â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚      SettingsContext                     â”‚                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚
â”‚  â”‚  â”‚ mode: "max_performance"            â”‚  â”‚                 â”‚
â”‚  â”‚  â”‚ inferenceThrottleMs: 0             â”‚  â”‚                 â”‚
â”‚  â”‚  â”‚ (Server mode when = 0)             â”‚  â”‚                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                 â”‚                                               â”‚
â”‚                 â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   AdaptiveCameraFeed Component           â”‚                 â”‚
â”‚  â”‚                                          â”‚                 â”‚
â”‚  â”‚  if (mode === "max_performance"):        â”‚                 â”‚
â”‚  â”‚     Use SERVER MODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚
â”‚  â”‚                                       â”‚  â”‚                 â”‚
â”‚  â”‚  else:                                â”‚  â”‚                 â”‚
â”‚  â”‚     Use CLIENT MODE                   â”‚  â”‚                 â”‚
â”‚  â”‚                                       â”‚  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”˜                 â”‚
â”‚                                          â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ HTTP POST
                                           â”‚ (base64 image)
                                           â”‚
                                           â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚      Backend Server              â”‚
                        â”‚                                  â”‚
                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                        â”‚  â”‚  hand_detection.py        â”‚   â”‚
                        â”‚  â”‚                           â”‚   â”‚
                        â”‚  â”‚  1. Decode base64 image   â”‚   â”‚
                        â”‚  â”‚  2. Run MediaPipe         â”‚   â”‚
                        â”‚  â”‚  3. Extract landmarks     â”‚   â”‚
                        â”‚  â”‚  4. Return JSON           â”‚   â”‚
                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                        â”‚                                  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Client Mode Flow (Balanced & Max Accuracy)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Browser (Client-Side)                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚   Camera    â”‚  30 FPS                                    â”‚
â”‚  â”‚   Feed      â”‚â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                      â”‚
â”‚                      â”‚                                      â”‚
â”‚                      â–¼                                      â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚            â”‚  MediaPipe.js    â”‚  (WASM - runs in browser)   â”‚
â”‚            â”‚  Hand Detection  â”‚                             â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â”œâ”€ Landmarks (21 points Ã— 3 coords)     â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â–¼                                       â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚            â”‚   Canvas         â”‚                             â”‚
â”‚            â”‚   Rendering      â”‚  Draw hands & landmarks     â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â”‚ Every 200-500ms (throttled)           â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â–¼                                       â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚            â”‚   ONNX Runtime   â”‚  (WebGL - runs in browser)  â”‚
â”‚            â”‚   Inference      â”‚                             â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â–¼                                       â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚            â”‚  Display Sign    â”‚  "A" (confidence: 0.95)     â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Everything runs in the browser - no server needed!
Works offline âœ…
```

## Server Mode Flow (Max Performance)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser (Client-Side)     â”‚         â”‚   Backend Server     â”‚
â”‚                             â”‚         â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚         â”‚                      â”‚
â”‚  â”‚   Camera    â”‚            â”‚         â”‚                      â”‚
â”‚  â”‚   Feed      â”‚            â”‚         â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚         â”‚                      â”‚
â”‚         â”‚                   â”‚         â”‚                      â”‚
â”‚         â”‚ Every 2 seconds   â”‚         â”‚                      â”‚
â”‚         â”‚                   â”‚         â”‚                      â”‚
â”‚         â–¼                   â”‚         â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚         â”‚                      â”‚
â”‚  â”‚  Capture    â”‚            â”‚         â”‚                      â”‚
â”‚  â”‚  Screenshot â”‚            â”‚         â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚         â”‚                      â”‚
â”‚         â”‚                   â”‚         â”‚                      â”‚
â”‚         â”‚ Convert to base64 â”‚         â”‚                      â”‚
â”‚         â”‚                   â”‚         â”‚                      â”‚
â”‚         â–¼                   â”‚         â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  HTTP   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  POST to /api/       â”‚â”€â”€â”¼â”€POSTâ”€â”€â”€â”€â”¼â”€>â”‚  MediaPipe      â”‚ â”‚
â”‚  â”‚  hand-detection/     â”‚  â”‚         â”‚  â”‚  (Python)       â”‚ â”‚
â”‚  â”‚  detect-hands        â”‚  â”‚         â”‚  â”‚                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â”‚  â€¢ Decode img   â”‚ â”‚
â”‚                            â”‚         â”‚  â”‚  â€¢ Detect hands â”‚ â”‚
â”‚         â–²                  â”‚         â”‚  â”‚  â€¢ Extract 21   â”‚ â”‚
â”‚         â”‚                  â”‚         â”‚  â”‚    landmarks    â”‚ â”‚
â”‚         â”‚ JSON response    â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                  â”‚  HTTP   â”‚           â”‚          â”‚
â”‚         â”‚                  â”‚ Responseâ”‚           â”‚          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Receive landmarks  â”‚<â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”‚  Return JSON    â”‚ â”‚
â”‚  â”‚  {landmarks: [...]} â”‚   â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚         â”‚                      â”‚
â”‚         â”‚                  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚         â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Canvas    â”‚           â”‚
â”‚  â”‚   Draw      â”‚           â”‚
â”‚  â”‚   Landmarks â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚
â”‚  Then run ONNX inference   â”‚
â”‚  to detect sign            â”‚
â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Server processes heavy computation
Client just captures & displays
```

## Settings Presets Configuration

```typescript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Performance Presets                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  MAX PERFORMANCE (Server-Side)                              â”‚
â”‚  â”œâ”€ inferenceThrottleMs: 0  â† Special: triggers server mode â”‚
â”‚  â”œâ”€ videoResolution: "640x480"                              â”‚
â”‚  â”œâ”€ frameRate: 30                                           â”‚
â”‚  â”œâ”€ modelComplexity: 0  (fastest)                           â”‚
â”‚  â””â”€ minConfidence: 0.7                                      â”‚
â”‚                                                              â”‚
â”‚  BALANCED (Client-Side)                                     â”‚
â”‚  â”œâ”€ inferenceThrottleMs: 500  â† Run inference every 500ms   â”‚
â”‚  â”œâ”€ videoResolution: "640x480"                              â”‚
â”‚  â”œâ”€ frameRate: 30                                           â”‚
â”‚  â”œâ”€ modelComplexity: 0  (fastest)                           â”‚
â”‚  â””â”€ minConfidence: 0.75                                     â”‚
â”‚                                                              â”‚
â”‚  MAX ACCURACY (Client-Side)                                 â”‚
â”‚  â”œâ”€ inferenceThrottleMs: 200  â† Run inference every 200ms   â”‚
â”‚  â”œâ”€ videoResolution: "640x480"                              â”‚
â”‚  â”œâ”€ frameRate: 30                                           â”‚
â”‚  â”œâ”€ modelComplexity: 1  (more accurate)                     â”‚
â”‚  â””â”€ minConfidence: 0.8                                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App (layout.tsx)
â”‚
â”œâ”€ AuthProvider
â”‚  â””â”€ SettingsProvider  â† Wraps entire app
â”‚     â”‚
â”‚     â””â”€ {children}
â”‚        â”‚
â”‚        â”œâ”€ Navigation
â”‚        â”‚  â””â”€ Link to /settings
â”‚        â”‚
â”‚        â”œâ”€ /settings (Settings Page)
â”‚        â”‚  â”‚
â”‚        â”‚  â”œâ”€ Slider Component
â”‚        â”‚  â”‚  â””â”€ onChange â†’ updateSettings()
â”‚        â”‚  â”‚
â”‚        â”‚  â””â”€ Mode Info Cards
â”‚        â”‚     â”œâ”€ Max Performance
â”‚        â”‚     â”œâ”€ Balanced
â”‚        â”‚     â””â”€ Max Accuracy
â”‚        â”‚
â”‚        â””â”€ /practice (Practice Page)
â”‚           â”‚
â”‚           â”œâ”€ useSettings() hook
â”‚           â”‚  â””â”€ Get current settings
â”‚           â”‚
â”‚           â””â”€ AdaptiveCameraFeed
â”‚              â”‚
â”‚              â”œâ”€ if (mode === "max_performance")
â”‚              â”‚  â””â”€ Server Mode
â”‚              â”‚     â”œâ”€ Start camera
â”‚              â”‚     â”œâ”€ Capture snapshots every 2s
â”‚              â”‚     â”œâ”€ POST to backend
â”‚              â”‚     â””â”€ Draw received landmarks
â”‚              â”‚
â”‚              â””â”€ else
â”‚                 â””â”€ Client Mode
â”‚                    â”œâ”€ Start camera
â”‚                    â”œâ”€ Initialize MediaPipe
â”‚                    â”œâ”€ Process every frame
â”‚                    â””â”€ Draw landmarks
```

## Data Flow - Settings Update

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. User moves slider on /settings page                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. handleSliderChange(value)                              â”‚
â”‚     â€¢ Maps slider value to mode name                       â”‚
â”‚     â€¢ Gets preset for that mode                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. updateSettings(preset)                                 â”‚
â”‚     â€¢ Updates SettingsContext state                        â”‚
â”‚     â€¢ Triggers useEffect                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. useEffect saves to localStorage                        â”‚
â”‚     localStorage.setItem('asl-performance-settings', JSON) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. All components using useSettings() re-render           â”‚
â”‚     â€¢ AdaptiveCameraFeed switches mode                     â”‚
â”‚     â€¢ Practice page updates throttle                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Comparison Chart

```
CPU Usage Over Time
â”‚
â”‚  Max Accuracy â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ~60%
â”‚                â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
â”‚
â”‚  Balanced â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ~40%
â”‚            â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
â”‚
â”‚  Max Performance â”€â”€â”€â”€ ~10%
â”‚                    â–“â–“â–“â–“
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Time
```

```
Latency (Time to detect sign change)
â”‚
â”‚  Server Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2000ms (snapshot interval)
â”‚               â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”‚
â”‚  Balanced â”€â”€â”€â”€â”€â”€â”€â”€ 500ms
â”‚           â”â”â”â”â”â”â”â”â”â”
â”‚
â”‚  Max Accuracy â”€â”€â”€â”€ 200ms
â”‚                 â”â”â”â”
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Time
```

## File Structure

```
frontend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx                    â† Wraps app in SettingsProvider
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â””â”€â”€ page.tsx                 â† Settings UI with slider
â”‚   â””â”€â”€ practice/
â”‚       â””â”€â”€ page.tsx                 â† Uses AdaptiveCameraFeed
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navigation.tsx               â† Added Settings link
â”‚   â”œâ”€â”€ AdaptiveCameraFeed.tsx       â† Smart camera (NEW!)
â”‚   â”œâ”€â”€ CameraFeed.tsx              â† Original client-only
â”‚   â””â”€â”€ ui/
â”‚       â””â”€â”€ slider.tsx              â† Radix UI slider (NEW!)
â”‚
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ SettingsContext.tsx         â† Settings state (NEW!)
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ mediapipe.ts                â† Client-side MediaPipe
    â”œâ”€â”€ onnx-inference.ts           â† Client-side ONNX
    â””â”€â”€ serverHandDetection.ts      â† Server API client (NEW!)

backend/
â”œâ”€â”€ main.py                         â† Added hand detection routes
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ hand_detection.py          â† Server-side MediaPipe (NEW!)
â”‚   â”œâ”€â”€ lessons.py
â”‚   â””â”€â”€ progress.py
â”œâ”€â”€ venv/                          â† Python 3.11 + MediaPipe (NEW!)
â””â”€â”€ run.sh                         â† Helper script (NEW!)
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend Stack                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Framework:          Next.js 14 (React)                 â”‚
â”‚  Language:           TypeScript                          â”‚
â”‚  State Management:   React Context API                  â”‚
â”‚  Storage:            localStorage (browser)             â”‚
â”‚  UI Components:      Radix UI, shadcn/ui               â”‚
â”‚  Camera Processing:  MediaPipe Hands (WASM)            â”‚
â”‚  AI Inference:       ONNX Runtime (WebGL/WASM)         â”‚
â”‚  HTTP Client:        fetch API                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend Stack                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Framework:          FastAPI                            â”‚
â”‚  Language:           Python 3.11                        â”‚
â”‚  Hand Detection:     MediaPipe 0.10.21                  â”‚
â”‚  Image Processing:   OpenCV 4.11.0.86                   â”‚
â”‚  Server:             Uvicorn (ASGI)                     â”‚
â”‚  Validation:         Pydantic                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Key Design Decisions

### Why Three Modes?

1. **Max Performance**: For users with weak devices or unstable client-side performance
2. **Balanced**: For most users - good balance of features and performance
3. **Max Accuracy**: For power users and developers who want real-time analysis

### Why Server Mode Uses Snapshots?

- Full 30 FPS streaming to server would be too bandwidth-intensive
- Snapshots provide good UX while keeping server load manageable
- 2-second interval is frequent enough for learning/practice
- User still sees smooth video - only landmark detection is periodic

### Why Store Settings Locally?

- No database needed for basic functionality
- Instant loading (no API call)
- Works offline
- User-specific (per browser/device)
- Easy to reset (just clear localStorage)

### Why Adaptive Camera Component?

- Single component handles both modes
- Clean API (same props as CameraFeed)
- Mode switching is transparent to parent
- Easier to maintain than two separate components

---

This architecture provides flexibility, performance, and user choice! ğŸš€
